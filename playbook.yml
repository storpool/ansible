#!/usr/bin/env ansible-playbook
---
- import_playbook: playbooks/1_prepare.yml
- import_playbook: playbooks/2_setup-infra.yml
- import_playbook: playbooks/3_install-storpool.yml
- import_playbook: playbooks/4_setup-network.yml

- name: Configure Drives
  hosts: storpool_servers
  gather_facts: false
  roles:
    - initialize_disks
  tags:
    - initialize_disks

- name: Configure StorPool CGroups
  hosts: storpool
  gather_facts: false
  roles:
    - configure-cgroups
  tags:
    - setup-cgroups

- import_playbook: playbooks/7_setup-services.yml
- import_playbook: playbooks/common_reboot.yml
- import_playbook: playbooks/8_tests.yml
- import_playbook: playbooks/9_sed.yml
